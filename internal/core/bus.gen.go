// Code generated by generate-bus.go; DO NOT EDIT.
package core

import (
	"context"
	"errors"
	"github.com/ItsNotGoodName/ipcmanview/internal/models"
	"github.com/ItsNotGoodName/ipcmanview/pkg/pubsub"
	"github.com/ItsNotGoodName/ipcmanview/pkg/sutureext"
	"github.com/rs/zerolog/log"
)

func busLogError(err error) {
	if err != nil {
		log.Err(err).Str("package", "core").Msg("Failed to handle event")
	}
}

func NewBus() *Bus {
	return &Bus{
		ServiceContext: sutureext.NewServiceContext("core.Bus"),
	}
}

type Bus struct {
	sutureext.ServiceContext
	onEventDahuaDeviceCreated []func(ctx context.Context, event models.EventDahuaDeviceCreated) error
	onEventDahuaDeviceUpdated []func(ctx context.Context, event models.EventDahuaDeviceUpdated) error
	onEventDahuaDeviceDeleted []func(ctx context.Context, event models.EventDahuaDeviceDeleted) error
	onEventDahuaEvent []func(ctx context.Context, event models.EventDahuaEvent) error
	onEventDahuaEventWorkerConnecting []func(ctx context.Context, event models.EventDahuaEventWorkerConnecting) error
	onEventDahuaEventWorkerConnect []func(ctx context.Context, event models.EventDahuaEventWorkerConnect) error
	onEventDahuaEventWorkerDisconnect []func(ctx context.Context, event models.EventDahuaEventWorkerDisconnect) error
	onEventDahuaCoaxialStatus []func(ctx context.Context, event models.EventDahuaCoaxialStatus) error
}

func (b *Bus) Register(pub pubsub.Pub) (*Bus) {
	b.OnEventDahuaDeviceCreated(func(ctx context.Context, event models.EventDahuaDeviceCreated) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaDeviceUpdated(func(ctx context.Context, event models.EventDahuaDeviceUpdated) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaDeviceDeleted(func(ctx context.Context, event models.EventDahuaDeviceDeleted) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaEvent(func(ctx context.Context, event models.EventDahuaEvent) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaEventWorkerConnecting(func(ctx context.Context, event models.EventDahuaEventWorkerConnecting) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaEventWorkerConnect(func(ctx context.Context, event models.EventDahuaEventWorkerConnect) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaEventWorkerDisconnect(func(ctx context.Context, event models.EventDahuaEventWorkerDisconnect) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	b.OnEventDahuaCoaxialStatus(func(ctx context.Context, event models.EventDahuaCoaxialStatus) error {
		err := pub.Publish(ctx, event)
		if err == nil || errors.Is(err, pubsub.ErrPubSubClosed) {
			return nil
		}
		return err
	})
	return b
}


func (b *Bus) OnEventDahuaDeviceCreated(h func(ctx context.Context, event models.EventDahuaDeviceCreated) error) {
	b.onEventDahuaDeviceCreated = append(b.onEventDahuaDeviceCreated, h)
}

func (b *Bus) OnEventDahuaDeviceUpdated(h func(ctx context.Context, event models.EventDahuaDeviceUpdated) error) {
	b.onEventDahuaDeviceUpdated = append(b.onEventDahuaDeviceUpdated, h)
}

func (b *Bus) OnEventDahuaDeviceDeleted(h func(ctx context.Context, event models.EventDahuaDeviceDeleted) error) {
	b.onEventDahuaDeviceDeleted = append(b.onEventDahuaDeviceDeleted, h)
}

func (b *Bus) OnEventDahuaEvent(h func(ctx context.Context, event models.EventDahuaEvent) error) {
	b.onEventDahuaEvent = append(b.onEventDahuaEvent, h)
}

func (b *Bus) OnEventDahuaEventWorkerConnecting(h func(ctx context.Context, event models.EventDahuaEventWorkerConnecting) error) {
	b.onEventDahuaEventWorkerConnecting = append(b.onEventDahuaEventWorkerConnecting, h)
}

func (b *Bus) OnEventDahuaEventWorkerConnect(h func(ctx context.Context, event models.EventDahuaEventWorkerConnect) error) {
	b.onEventDahuaEventWorkerConnect = append(b.onEventDahuaEventWorkerConnect, h)
}

func (b *Bus) OnEventDahuaEventWorkerDisconnect(h func(ctx context.Context, event models.EventDahuaEventWorkerDisconnect) error) {
	b.onEventDahuaEventWorkerDisconnect = append(b.onEventDahuaEventWorkerDisconnect, h)
}

func (b *Bus) OnEventDahuaCoaxialStatus(h func(ctx context.Context, event models.EventDahuaCoaxialStatus) error) {
	b.onEventDahuaCoaxialStatus = append(b.onEventDahuaCoaxialStatus, h)
}



func (b *Bus) EventDahuaDeviceCreated(event models.EventDahuaDeviceCreated) {
	for _, v := range b.onEventDahuaDeviceCreated {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaDeviceUpdated(event models.EventDahuaDeviceUpdated) {
	for _, v := range b.onEventDahuaDeviceUpdated {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaDeviceDeleted(event models.EventDahuaDeviceDeleted) {
	for _, v := range b.onEventDahuaDeviceDeleted {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaEvent(event models.EventDahuaEvent) {
	for _, v := range b.onEventDahuaEvent {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaEventWorkerConnecting(event models.EventDahuaEventWorkerConnecting) {
	for _, v := range b.onEventDahuaEventWorkerConnecting {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaEventWorkerConnect(event models.EventDahuaEventWorkerConnect) {
	for _, v := range b.onEventDahuaEventWorkerConnect {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaEventWorkerDisconnect(event models.EventDahuaEventWorkerDisconnect) {
	for _, v := range b.onEventDahuaEventWorkerDisconnect {
		busLogError(v(b.Context(), event))
	}
}

func (b *Bus) EventDahuaCoaxialStatus(event models.EventDahuaCoaxialStatus) {
	for _, v := range b.onEventDahuaCoaxialStatus {
		busLogError(v(b.Context(), event))
	}
}

